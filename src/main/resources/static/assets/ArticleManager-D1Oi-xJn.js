import{d as w,Q as E,j as z,l as P,h as s,o as V,I,P as a,w as o,F as T,L as d}from"./index-i72Bb-xp.js";import{E as B,a as $,b as j}from"./table-column-B_tk2Uyr.js";import{i as g,E as D,a as F}from"./request-DpbL_-xe.js";import"./popper-9fTqE4ZE.js";import"./index-CslebMiX.js";import"./_initCloneObject-DLSLqGI1.js";const R=w({__name:"ArticleManager",setup(M){const _=E(),f=e=>{console.log("click"),console.log(e),_.push({path:"/editUpdate",query:{id:e.articlesId}})},y=e=>{g.delete(`/api/articles/${e.articlesId}`).then(t=>{console.log(t),c()}).catch(t=>{console.log(t)}),console.log("delete")},l=z([]);P(async()=>{await c()});const i=s(""),n=s(1),h=s(10),m=s(10);async function v(e){n.value=e,c()}async function c(){try{g.get("/api/articlesPage",{params:{page:n.value,info:i.value}}).then(e=>{console.log(e.data.data),l.splice(0,l.length,...e.data.data.records),h.value=e.data.data.total,m.value=e.data.data.size,n.value=e.data.data.current,console.log(l)}).catch(e=>{console.log(e)})}catch(e){console.log(e)}}return(e,t)=>{const b=D,p=F,u=j,x=B,k=$;return V(),I(T,null,[a(b,{modelValue:i.value,"onUpdate:modelValue":t[0]||(t[0]=r=>i.value=r),placeholder:"请输入内容搜索",style:{width:"200px","margin-bottom":"10px","margin-top":"20px"}},null,8,["modelValue"]),a(p,{type:"primary",style:{width:"200px","margin-bottom":"10px","margin-top":"20px"},onClick:c},{default:o(()=>[d("搜索")]),_:1}),a(x,{data:l,border:"",style:{width:"60%",margin:"auto"}},{default:o(()=>[a(u,{prop:"createTime",label:"发表日期"}),a(u,{prop:"name",label:"文章名称"}),a(u,{label:"操作"},{default:o(r=>[a(p,{link:"",type:"primary",size:"small",onClick:C=>f(r.row)},{default:o(()=>[d(" 编辑 ")]),_:2},1032,["onClick"]),a(p,{link:"",type:"primary",size:"small",onClick:C=>y(r.row)},{default:o(()=>[d("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),a(k,{style:{"text-align":"center","justify-content":"center","margin-top":"10px"},layout:"prev, pager, next",total:50,"page-size":m.value,"current-page":n.value,onCurrentChange:v},null,8,["page-size","current-page"])],64)}}});export{R as default};
