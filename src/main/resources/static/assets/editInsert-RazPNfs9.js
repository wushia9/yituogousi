import{R as y,S as C,h as f,l as b,n as x,Q as T,H as v,o as E,I as k,P as i,J as _,F as w}from"./index-i72Bb-xp.js";import{i as m,E as V,a as I}from"./request-DpbL_-xe.js";import{E as B,T as D}from"./index.esm-DeeCtkG-.js";import{f as g}from"./index-CslebMiX.js";import{E as h}from"./index-DIF929JA.js";import{_ as R}from"./_plugin-vue_export-helper-DlAUqK2U.js";const F={components:{Editor:B,Toolbar:D,Check:g},setup(){const r=y(),a=C(),p=g;let e=!0;const o=f({articlesId:1,name:"",content:"",tag:"",createTime:new Date,updateTime:new Date}),l=f('<p><span style="color: rgb(140, 140, 140);">请输入文章内容并编辑，点击右下角发布按钮发布文章。</span></p>'),s=t=>t.toISOString().replace("T"," ").replace("Z"," UTC");b(()=>{console.log(a.query.id),a.query.id!=null?(e=!1,m.get(`/api/articles/${a.query.id}`).then(t=>{t.data.data.updateTime=s(new Date),o.value=t.data.data,l.value=t.data.data.content})):(o.value.createTime=s(new Date(o.value.createTime)),o.value.updateTime=s(new Date(o.value.updateTime)))});const d={},c={placeholder:"请输入内容..."};x(()=>{const t=r.value;t!=null&&t.destroy()});const u=t=>{r.value=t},n=T();return{editorRef:r,valueHtml:l,mode:"default",toolbarConfig:d,editorConfig:c,handleCreated:u,article:o,check:p,submit:()=>{e?(o.value.content=l.value,m.post("/api/articles",o.value).then(t=>{h({message:"保存成功",type:"success"}),n.push({path:"/"})})):(o.value.content=l.value,m.put("/api/articles/1",o.value).then(t=>{h({message:"保存成功",type:"success"}),n.push({path:"/"})}))}}}},H={class:"editor-container",style:{border:"1px solid #ccc"}},U={style:{display:"flex","justify-content":"flex-end"}};function q(r,a,p,e,o,l){const s=V,d=v("Toolbar"),c=v("Editor"),u=I;return E(),k(w,null,[i(s,{modelValue:e.article.name,"onUpdate:modelValue":a[0]||(a[0]=n=>e.article.name=n),style:{width:"240px"},placeholder:"请输入标题"},null,8,["modelValue"]),_("div",H,[i(d,{style:{"border-bottom":"1px solid #ccc"},editor:e.editorRef,defaultConfig:e.toolbarConfig,mode:e.mode},null,8,["editor","defaultConfig","mode"]),i(c,{style:{height:"500px","overflow-y":"hidden"},modelValue:e.valueHtml,"onUpdate:modelValue":a[1]||(a[1]=n=>e.valueHtml=n),defaultConfig:e.editorConfig,mode:e.mode,onOnCreated:e.handleCreated},null,8,["modelValue","defaultConfig","mode","onOnCreated"]),_("div",U,[i(u,{onClick:e.submit,type:"success",icon:e.check,circle:"",style:{display:"flex","margin-right":"12px","margin-bottom":"12px","z-index":"11"}},null,8,["onClick","icon"])])])],64)}const P=R(F,[["render",q],["__scopeId","data-v-820e6579"]]);export{P as default};
